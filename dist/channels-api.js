!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["channels-api"]=e():t["channels-api"]=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=119)}([function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(16),i="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,s=o||i||Function("return this")();t.exports=s},function(t,e,n){"use strict";function r(t,e){var n=i(t,e);return o(n)?n:void 0}var o=n(52),i=n(70);t.exports=r},function(t,e,n){"use strict";function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var o=n(81),i=n(82),s=n(83),u=n(84),c=n(85);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=s,r.prototype.has=u,r.prototype.set=c,t.exports=r},function(t,e,n){"use strict";function r(t,e){for(var n=t.length;n--;)if(o(t[n][0],e))return n;return-1}var o=n(18);t.exports=r},function(t,e,n){"use strict";function r(t){return null==t?void 0===t?c:u:a&&a in Object(t)?i(t):s(t)}var o=n(9),i=n(67),s=n(94),u="[object Null]",c="[object Undefined]",a=o?o.toStringTag:void 0;t.exports=r},function(t,e,n){"use strict";function r(t,e){var n=t.__data__;return o(e)?n["string"==typeof e?"string":"hash"]:n.map}var o=n(77);t.exports=r},function(t,e,n){"use strict";var r=n(1),o=r(Object,"create");t.exports=o},function(t,e,n){"use strict";function r(t){return null!=t&&"object"==(void 0===t?"undefined":o(t))}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=r},function(t,e,n){"use strict";var r=n(1),o=n(0),i=r(o,"Map");t.exports=i},function(t,e,n){"use strict";var r=n(0),o=r.Symbol;t.exports=o},function(t,e,n){"use strict";var r=Array.isArray;t.exports=r},function(t,e,n){"use strict";function r(t){var e=void 0===t?"undefined":o(t);return null!=t&&("object"==e||"function"==e)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=r},function(t,e,n){"use strict";function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var o=n(86),i=n(87),s=n(88),u=n(89),c=n(90);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=s,r.prototype.has=u,r.prototype.set=c,t.exports=r},function(t,e,n){"use strict";function r(t){var e=this.__data__=new o(t);this.size=e.size}var o=n(2),i=n(102),s=n(103),u=n(104),c=n(105),a=n(106);r.prototype.clear=i,r.prototype.delete=s,r.prototype.get=u,r.prototype.has=c,r.prototype.set=a,t.exports=r},function(t,e,n){"use strict";function r(t){return function(e){return t(e)}}t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r,a,f){var l=n&u,p=t.length,y=e.length;if(p!=y&&!(l&&y>p))return!1;var h=f.get(t);if(h&&f.get(e))return h==e;var v=-1,d=!0,b=n&c?new o:void 0;for(f.set(t,e),f.set(e,t);++v<p;){var _=t[v],m=e[v];if(r)var g=l?r(m,_,v,e,t,f):r(_,m,v,t,e,f);if(void 0!==g){if(g)continue;d=!1;break}if(b){if(!i(e,function(t,e){if(!s(b,e)&&(_===t||a(_,t,n,r,f)))return b.push(e)})){d=!1;break}}else if(_!==m&&!a(_,m,n,r,f)){d=!1;break}}return f.delete(t),f.delete(e),d}var o=n(34),i=n(42),s=n(59),u=1,c=2;t.exports=r},function(t,e,n){"use strict";(function(e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="object"==(void 0===e?"undefined":n(e))&&e&&e.Object===Object&&e;t.exports=r}).call(e,n(118))},function(t,e,n){"use strict";function r(t){if(null!=t){try{return i.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var o=Function.prototype,i=o.toString;t.exports=r},function(t,e,n){"use strict";function r(t,e){return t===e||t!==t&&e!==e}t.exports=r},function(t,e,n){"use strict";function r(t){return t}t.exports=r},function(t,e,n){"use strict";(function(t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(0),i=n(115),s="object"==r(e)&&e&&!e.nodeType&&e,u=s&&"object"==r(t)&&t&&!t.nodeType&&t,c=u&&u.exports===s,a=c?o.Buffer:void 0,f=a?a.isBuffer:void 0,l=f||i;t.exports=l}).call(e,n(25)(t))},function(t,e,n){"use strict";function r(t){if(!i(t))return!1;var e=o(t);return e==u||e==c||e==s||e==a}var o=n(4),i=n(11),s="[object AsyncFunction]",u="[object Function]",c="[object GeneratorFunction]",a="[object Proxy]";t.exports=r},function(t,e,n){"use strict";function r(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}var o=9007199254740991;t.exports=r},function(t,e,n){"use strict";var r=n(53),o=n(14),i=n(93),s=i&&i.isTypedArray,u=s?o(s):r;t.exports=u},function(t,e,n){"use strict";function r(t){return s(t)?o(t):i(t)}var o=n(39),i=n(54),s=n(110);t.exports=r},function(t,e,n){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,n,r,o){var i={};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.ChannelsApi=e.SubscriptionPromise=e.FifoQueue=e.BaseSendQueue=e.WebsocketTransport=e.FifoDispatcher=void 0;var c,a,f,l,p,y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h=n(29),v=r(h),d=n(117),b=r(d),_=n(28),m=r(_),g=n(111),w=r(g),x=n(112),j=r(x),O=n(116),S=r(O),k=n(27),E=r(k),P=S.default.getLogger("channels-api"),L=(e.FifoDispatcher=(a=c=function(){function t(){u(this,t),this._listeners={},this._listenersOrder=[]}return y(t,[{key:"listen",value:function(t,e){var n=++this.constructor._listenerCounter;return this._listeners[n]={selector:t,handler:e},this._listenersOrder.push(n),n}},{key:"once",value:function(t,e){var n=this,r=this.listen(t,function(t){n.cancel(r),e(t)});return r}},{key:"cancel",value:function(t){var e=this._listeners.hasOwnProperty(t);return e&&(delete this._listeners[t],(0,j.default)(this._listenersOrder,t)),e}},{key:"dispatch",value:function(t){var e=this,n=0;return this._listenersOrder.map(function(t){return e._listeners[t]}).forEach(function(e){var r=e.selector,o=e.handler;(0,w.default)(t,r)&&(n++,o(t))}),n}}]),t}(),c._listenerCounter=0,a),e.WebsocketTransport=(f=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.url=t,r.options=n,r.socket=null,r.hasConnected=!1,r}return i(e,t),y(e,[{key:"connect",value:function(){return null!=this.socket?(P.debug("Attempt to connect already-connected socket ignored (%s)",this.url),!1):(P.info("Connecting to websocket at %s",this.url),this.socket=new b.default(this.url,[],this.options),this.socket.addEventListener("message",this._handleMessage),this.socket.addEventListener("open",this._handleOpen),!0)}},{key:"isConnected",value:function(){return null!=this.socket&&this.socket.readyState===this.socket.OPEN}},{key:"send",value:function(t){return this._requireConnection(),this.socket.send(t)}},{key:"_handleMessage",value:function(t){this.emit("message",t)}},{key:"_handleOpen",value:function(t){this.emit("open",t),this.hasConnected?this.emit("reconnect",t):(this.emit("connect",t),this.hasConnected=!0)}},{key:"_requireConnection",value:function(){if(null===this.socket)throw new Error("Socket not connected. Please call `initialize()` first.")}}]),e}(v.default),s(f.prototype,"connect",[m.default],Object.getOwnPropertyDescriptor(f.prototype,"connect"),f.prototype),s(f.prototype,"isConnected",[m.default],Object.getOwnPropertyDescriptor(f.prototype,"isConnected"),f.prototype),s(f.prototype,"send",[m.default],Object.getOwnPropertyDescriptor(f.prototype,"send"),f.prototype),s(f.prototype,"_handleMessage",[m.default],Object.getOwnPropertyDescriptor(f.prototype,"_handleMessage"),f.prototype),s(f.prototype,"_handleOpen",[m.default],Object.getOwnPropertyDescriptor(f.prototype,"_handleOpen"),f.prototype),f),e.BaseSendQueue=function(){function t(e,n){if(u(this,t),this.sendNow=function(t){return-1},this.canSend=function(){return!1},e&&n)this.initialize(e,n);else if(e||n)throw new Error("Both sendNow and canSend must be provided, or neither must.")}return y(t,[{key:"initialize",value:function(t,e){this.sendNow=t,this.canSend=e}},{key:"send",value:function(t){throw new Error("not implemented")}},{key:"queueMessage",value:function(t){throw new Error("not implemented")}},{key:"processQueue",value:function(){throw new Error("not implemented")}}]),t}()),A=(e.FifoQueue=(l=function(t){function e(t,n){u(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.queue=[],r}return i(e,t),y(e,[{key:"send",value:function(t){return this.canSend()?this.sendNow(t):(this.queueMessage(t),-1)}},{key:"queueMessage",value:function(t){return P.debug("Queueing message to send later: %o",t),this.queue.push(t),!0}},{key:"processQueue",value:function(){var t=0;if(this.queue.length)for(P.debug("Sending "+this.queue.length+" queued messages.");this.queue.length;){var e=this.queue.shift();this.sendNow(e),t++}return t}}]),e}(L),s(l.prototype,"send",[m.default],Object.getOwnPropertyDescriptor(l.prototype,"send"),l.prototype),s(l.prototype,"queueMessage",[m.default],Object.getOwnPropertyDescriptor(l.prototype,"queueMessage"),l.prototype),s(l.prototype,"processQueue",[m.default],Object.getOwnPropertyDescriptor(l.prototype,"processQueue"),l.prototype),l),e.SubscriptionPromise=function(t){function e(t,n){u(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r._unsubscribe=n,r}return i(e,t),y(e,[{key:"cancel",value:function(){return this._unsubscribe()}}]),e}(Promise));e.ChannelsApi=(p=function(){function t(e,n,r,o){u(this,t),this.dispatcher=e,this.transport=n,this.queue=r,this.serializer=o,this.queue.initialize(this.transport.send,this.transport.isConnected),this.subscriptions={}}return y(t,[{key:"initialize",value:function(){this.transport.connect(),this.transport.on("message",this._handleTransportMessage),this.transport.on("connect",this._handleTransportConnect),this.transport.on("reconnect",this._handleTransportReconnect)}},{key:"create",value:function(t,e){return this.request(t,{action:"create",data:e})}},{key:"retrieve",value:function(t,e){return this.request(t,{action:"retrieve",pk:e})}},{key:"update",value:function(t,e,n){return this.request(t,{action:"update",pk:e,data:n})}},{key:"delete",value:function(t,e){return this.request(t,{action:"delete",pk:e})}},{key:"subscribe",value:function(t,e,n,r){if("function"==typeof n&&(r=n,n=null),null==r)throw new Error("callback must be provided");var o=this._buildSubscriptionSelector(t,e,n),i=this._buildListener(r),s=this._buildSubscribePayload(e,n),u=this.dispatcher.listen(o,i),c=this._buildMultiplexedMessage(t,s);this.subscriptions[u]={selector:o,handler:i,message:c};var a=this.request(t,s),f=this._unsubscribe.bind(this,u);return new A(function(t,e){a.then(t,e)},f)}},{key:"resubscribe",value:function(){var t=Object.values(this.subscriptions),e=t;P.info("Resending %d subscription requests",e.length);var n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value.message;this.sendNow(u)}}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}}},{key:"request",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E.default.generate();return new Promise(function(o,i){var s=n._buildRequestResponseSelector(t,r);n.dispatcher.once(s,function(t){var e=t.payload,n=e.responseStatus;2===Math.floor(n/100)?o(e.data):i(e)});var u=n._buildMultiplexedMessage(t,Object.assign({},e,{requestId:r}));n.send(u)})}},{key:"send",value:function(t){return this._doSend(t,this.queue.send)}},{key:"sendNow",value:function(t){return this._doSend(t,this.queue.sendNow)}},{key:"_doSend",value:function(t,e){return e(this.serializer.serialize(t))}},{key:"_unsubscribe",value:function(t){var e=this.subscriptions.hasOwnProperty(t);return e&&(this.dispatcher.cancel(t),delete this.subscriptions[t]),e}},{key:"_handleTransportMessage",value:function(t){var e=this.serializer.deserialize(t.data);return this._handleMessage(e)}},{key:"_handleMessage",value:function(t){this.dispatcher.dispatch(t)}},{key:"_handleTransportConnect",value:function(){P.debug("Initial API connection over transport %s",this.transport),this.queue.processQueue()}},{key:"_handleTransportReconnect",value:function(){P.debug("Reestablished API connection"),this.resubscribe(),this.queue.processQueue()}},{key:"_buildMultiplexedMessage",value:function(t,e){return{stream:t,payload:e}}},{key:"_buildRequestResponseSelector",value:function(t,e){return{stream:t,payload:{requestId:e}}}},{key:"_buildSubscribePayload",value:function(t,e){var n={action:"subscribe",data:{action:t,pk:e}};return null==e&&delete n.data.pk,n}},{key:"_buildSubscriptionSelector",value:function(t,e,n){var r={stream:t,payload:{action:e,pk:n}};return null==n&&delete r.payload.pk,r}},{key:"_buildListener",value:function(t){return function(e){return t(e.payload.data)}}}]),t}(),s(p.prototype,"_handleTransportMessage",[m.default],Object.getOwnPropertyDescriptor(p.prototype,"_handleTransportMessage"),p.prototype),s(p.prototype,"_handleTransportConnect",[m.default],Object.getOwnPropertyDescriptor(p.prototype,"_handleTransportConnect"),p.prototype),s(p.prototype,"_handleTransportReconnect",[m.default],Object.getOwnPropertyDescriptor(p.prototype,"_handleTransportReconnect"),p.prototype),p)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){for(var t={},e=[],n=0;n<256;n++)e[n]=(n<16?"0":"")+n.toString(16);return t.generate=function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,o=4294967295*Math.random()|0;return e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&o]+e[o>>8&255]+e[o>>16&255]+e[o>>24&255]},t}();e.default=r},function(t,e,n){"use strict";function r(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 1===e.length?o.apply(void 0,e):i.apply(void 0,e)}function o(t){var e=void 0;return"undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys?e=Reflect.ownKeys(t.prototype):(e=Object.getOwnPropertyNames(t.prototype),"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(t.prototype)))),e.forEach(function(e){if("constructor"!==e){var n=Object.getOwnPropertyDescriptor(t.prototype,e);"function"==typeof n.value&&Object.defineProperty(t.prototype,e,i(t,e,n))}}),t}function i(t,e,n){var r=n.value;if("function"!=typeof r)throw new Error("@autobind decorator can only be applied to methods not: "+(void 0===r?"undefined":s(r)));var o=!1;return{configurable:!0,get:function(){if(o||this===t.prototype||this.hasOwnProperty(e))return r;var n=r.bind(this);return o=!0,Object.defineProperty(this,e,{value:n,configurable:!0,writable:!0}),o=!1,n}}}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0}),e.default=r,t.exports=e.default},function(t,e,n){"use strict";function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(t){return"function"==typeof t}function i(t){return"number"==typeof t}function s(t){return"object"===(void 0===t?"undefined":c(t))&&null!==t}function u(t){return void 0===t}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,i,c,a;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var f=new Error('Uncaught, unspecified "error" event. ('+e+")");throw f.context=e,f}if(n=this._events[t],u(n))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(s(n))for(i=Array.prototype.slice.call(arguments,1),a=n.slice(),r=a.length,c=0;c<r;c++)a[c].apply(this,i);return!0},r.prototype.addListener=function(t,e){var n;if(!o(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,o(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned&&(n=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!o(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,i,u;if(!o(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],i=n.length,r=-1,n===e||o(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(u=i;u-- >0;)if(n[u]===e||n[u].listener&&n[u].listener===e){r=u;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],o(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?o(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(o(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";var r=n(1),o=n(0),i=r(o,"DataView");t.exports=i},function(t,e,n){"use strict";function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var o=n(71),i=n(72),s=n(73),u=n(74),c=n(75);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=s,r.prototype.has=u,r.prototype.set=c,t.exports=r},function(t,e,n){"use strict";var r=n(1),o=n(0),i=r(o,"Promise");t.exports=i},function(t,e,n){"use strict";var r=n(1),o=n(0),i=r(o,"Set");t.exports=i},function(t,e,n){"use strict";function r(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new o;++e<n;)this.add(t[e])}var o=n(12),i=n(97),s=n(98);r.prototype.add=r.prototype.push=i,r.prototype.has=s,t.exports=r},function(t,e,n){"use strict";var r=n(0),o=r.Uint8Array;t.exports=o},function(t,e,n){"use strict";var r=n(1),o=n(0),i=r(o,"WeakMap");t.exports=i},function(t,e,n){"use strict";function r(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}t.exports=r},function(t,e,n){"use strict";function r(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var s=t[n];e(s,n,t)&&(i[o++]=s)}return i}t.exports=r},function(t,e,n){"use strict";function r(t,e){var n=s(t),r=!n&&i(t),f=!n&&!r&&u(t),p=!n&&!r&&!f&&a(t),y=n||r||f||p,h=y?o(t.length,String):[],v=h.length;for(var d in t)!e&&!l.call(t,d)||y&&("length"==d||f&&("offset"==d||"parent"==d)||p&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||c(d,v))||h.push(d);return h}var o=n(58),i=n(109),s=n(10),u=n(20),c=n(76),a=n(23),f=Object.prototype,l=f.hasOwnProperty;t.exports=r},function(t,e,n){"use strict";function r(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}t.exports=r},function(t,e,n){"use strict";function r(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}t.exports=r},function(t,e,n){"use strict";function r(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}t.exports=r},function(t,e,n){"use strict";function r(t,e,n){var r=e(t);return i(t)?r:o(r,n(t))}var o=n(41),i=n(10);t.exports=r},function(t,e,n){"use strict";function r(t,e,n){return e===e?s(t,e,n):o(t,i,n)}var o=n(43),i=n(51),s=n(107);t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){for(var o=n-1,i=t.length;++o<i;)if(r(t[o],e))return o;return-1}t.exports=r},function(t,e,n){"use strict";function r(t){return i(t)&&o(t)==s}var o=n(4),i=n(7),s="[object Arguments]";t.exports=r},function(t,e,n){"use strict";function r(t,e,n,s,u){return t===e||(null==t||null==e||!i(t)&&!i(e)?t!==t&&e!==e:o(t,e,n,s,r,u))}var o=n(49),i=n(7);t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r,d,_){var m=a(t),g=a(e),w=m?h:c(t),x=g?h:c(e);w=w==y?v:w,x=x==y?v:x;var j=w==v,O=x==v,S=w==x;if(S&&f(t)){if(!f(e))return!1;m=!0,j=!1}if(S&&!j)return _||(_=new o),m||l(t)?i(t,e,n,r,d,_):s(t,e,w,n,r,d,_);if(!(n&p)){var k=j&&b.call(t,"__wrapped__"),E=O&&b.call(e,"__wrapped__");if(k||E){var P=k?t.value():t,L=E?e.value():e;return _||(_=new o),d(P,L,n,r,_)}}return!!S&&(_||(_=new o),u(t,e,n,r,d,_))}var o=n(13),i=n(15),s=n(63),u=n(64),c=n(69),a=n(10),f=n(20),l=n(23),p=1,y="[object Arguments]",h="[object Array]",v="[object Object]",d=Object.prototype,b=d.hasOwnProperty;t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){var c=n.length,a=c,f=!r;if(null==t)return!a;for(t=Object(t);c--;){var l=n[c];if(f&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++c<a;){l=n[c];var p=l[0],y=t[p],h=l[1];if(f&&l[2]){if(void 0===y&&!(p in t))return!1}else{var v=new o;if(r)var d=r(y,h,p,t,e,v);if(!(void 0===d?i(h,y,s|u,r,v):d))return!1}}return!0}var o=n(13),i=n(48),s=1,u=2;t.exports=r},function(t,e,n){"use strict";function r(t){return t!==t}t.exports=r},function(t,e,n){"use strict";function r(t){return!(!s(t)||i(t))&&(o(t)?h:a).test(u(t))}var o=n(21),i=n(78),s=n(11),u=n(17),c=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,f=Function.prototype,l=Object.prototype,p=f.toString,y=l.hasOwnProperty,h=RegExp("^"+p.call(y).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e,n){"use strict";function r(t){return s(t)&&i(t.length)&&!!u[o(t)]}var o=n(4),i=n(22),s=n(7),u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u["[object Arguments]"]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u["[object Map]"]=u["[object Number]"]=u["[object Object]"]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1,t.exports=r},function(t,e,n){"use strict";function r(t){if(!o(t))return i(t);var e=[];for(var n in Object(t))u.call(t,n)&&"constructor"!=n&&e.push(n);return e}var o=n(79),i=n(92),s=Object.prototype,u=s.hasOwnProperty;t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){var a=r?s:i,l=-1,p=e.length,y=t;for(t===e&&(e=c(e)),n&&(y=o(t,u(n)));++l<p;)for(var h=0,v=e[l],d=n?n(v):v;(h=a(y,d,h,r))>-1;)y!==t&&f.call(y,h,1),f.call(t,h,1);return t}var o=n(40),i=n(45),s=n(46),u=n(14),c=n(60),a=Array.prototype,f=a.splice;t.exports=r},function(t,e,n){"use strict";function r(t,e){return s(i(t,e,o),t+"")}var o=n(19),i=n(96),s=n(100);t.exports=r},function(t,e,n){"use strict";var r=n(108),o=n(62),i=n(19),s=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;t.exports=s},function(t,e,n){"use strict";function r(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}t.exports=r},function(t,e,n){"use strict";function r(t,e){return t.has(e)}t.exports=r},function(t,e,n){"use strict";function r(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}t.exports=r},function(t,e,n){"use strict";var r=n(0),o=r["__core-js_shared__"];t.exports=o},function(t,e,n){"use strict";var r=n(1),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,n){"use strict";function r(t,e,n,r,o,j,S){switch(n){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case w:return!(t.byteLength!=e.byteLength||!j(new i(t),new i(e)));case p:case y:case d:return s(+t,+e);case h:return t.name==e.name&&t.message==e.message;case b:case m:return t==e+"";case v:var k=c;case _:var E=r&f;if(k||(k=a),t.size!=e.size&&!E)return!1;var P=S.get(t);if(P)return P==e;r|=l,S.set(t,e);var L=u(k(t),k(e),r,o,j,S);return S.delete(t),L;case g:if(O)return O.call(t)==O.call(e)}return!1}var o=n(9),i=n(35),s=n(18),u=n(15),c=n(91),a=n(99),f=1,l=2,p="[object Boolean]",y="[object Date]",h="[object Error]",v="[object Map]",d="[object Number]",b="[object RegExp]",_="[object Set]",m="[object String]",g="[object Symbol]",w="[object ArrayBuffer]",x="[object DataView]",j=o?o.prototype:void 0,O=j?j.valueOf:void 0;t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r,s,c){var a=n&i,f=o(t),l=f.length;if(l!=o(e).length&&!a)return!1;for(var p=l;p--;){var y=f[p];if(!(a?y in e:u.call(e,y)))return!1}var h=c.get(t);if(h&&c.get(e))return h==e;var v=!0;c.set(t,e),c.set(e,t);for(var d=a;++p<l;){y=f[p];var b=t[y],_=e[y];if(r)var m=a?r(_,b,y,e,t,c):r(b,_,y,t,e,c);if(!(void 0===m?b===_||s(b,_,n,r,c):m)){v=!1;break}d||(d="constructor"==y)}if(v&&!d){var g=t.constructor,w=e.constructor;g!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof w&&w instanceof w)&&(v=!1)}return c.delete(t),c.delete(e),v}var o=n(65),i=1,s=Object.prototype,u=s.hasOwnProperty;t.exports=r},function(t,e,n){"use strict";function r(t){return o(t,s,i)}var o=n(44),i=n(68),s=n(24);t.exports=r},function(t,e,n){"use strict";function r(t){for(var e=i(t),n=e.length;n--;){var r=e[n],s=t[r];e[n]=[r,s,o(s)]}return e}var o=n(80),i=n(24);t.exports=r},function(t,e,n){"use strict";function r(t){var e=s.call(t,c),n=t[c];try{t[c]=void 0;var r=!0}catch(t){}var o=u.call(t);return r&&(e?t[c]=n:delete t[c]),o}var o=n(9),i=Object.prototype,s=i.hasOwnProperty,u=i.toString,c=o?o.toStringTag:void 0;t.exports=r},function(t,e,n){"use strict";var r=n(38),o=n(114),i=Object.prototype,s=i.propertyIsEnumerable,u=Object.getOwnPropertySymbols,c=u?function(t){return null==t?[]:(t=Object(t),r(u(t),function(e){return s.call(t,e)}))}:o;t.exports=c},function(t,e,n){"use strict";var r=n(30),o=n(8),i=n(32),s=n(33),u=n(36),c=n(4),a=n(17),f="[object Map]",l="[object Promise]",p="[object Set]",y="[object WeakMap]",h="[object DataView]",v=a(r),d=a(o),b=a(i),_=a(s),m=a(u),g=c;(r&&g(new r(new ArrayBuffer(1)))!=h||o&&g(new o)!=f||i&&g(i.resolve())!=l||s&&g(new s)!=p||u&&g(new u)!=y)&&(g=function(t){var e=c(t),n="[object Object]"==e?t.constructor:void 0,r=n?a(n):"";if(r)switch(r){case v:return h;case d:return f;case b:return l;case _:return p;case m:return y}return e}),t.exports=g},function(t,e,n){"use strict";function r(t,e){return null==t?void 0:t[e]}t.exports=r},function(t,e,n){"use strict";function r(){this.__data__=o?o(null):{},this.size=0}var o=n(6);t.exports=r},function(t,e,n){"use strict";function r(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=r},function(t,e,n){"use strict";function r(t){var e=this.__data__;if(o){var n=e[t];return n===i?void 0:n}return u.call(e,t)?e[t]:void 0}var o=n(6),i="__lodash_hash_undefined__",s=Object.prototype,u=s.hasOwnProperty;t.exports=r},function(t,e,n){"use strict";function r(t){var e=this.__data__;return o?void 0!==e[t]:s.call(e,t)}var o=n(6),i=Object.prototype,s=i.hasOwnProperty;t.exports=r},function(t,e,n){"use strict";function r(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=o&&void 0===e?i:e,this}var o=n(6),i="__lodash_hash_undefined__";t.exports=r},function(t,e,n){"use strict";function r(t,e){return!!(e=null==e?o:e)&&("number"==typeof t||i.test(t))&&t>-1&&t%1==0&&t<e}var o=9007199254740991,i=/^(?:0|[1-9]\d*)$/;t.exports=r},function(t,e,n){"use strict";function r(t){var e=void 0===t?"undefined":o(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=r},function(t,e,n){"use strict";function r(t){return!!i&&i in t}var o=n(61),i=function(){var t=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=r},function(t,e,n){"use strict";function r(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||o)}var o=Object.prototype;t.exports=r},function(t,e,n){"use strict";function r(t){return t===t&&!o(t)}var o=n(11);t.exports=r},function(t,e,n){"use strict";function r(){this.__data__=[],this.size=0}t.exports=r},function(t,e,n){"use strict";function r(t){var e=this.__data__,n=o(e,t);return!(n<0)&&(n==e.length-1?e.pop():s.call(e,n,1),--this.size,!0)}var o=n(3),i=Array.prototype,s=i.splice;t.exports=r},function(t,e,n){"use strict";function r(t){var e=this.__data__,n=o(e,t);return n<0?void 0:e[n][1]}var o=n(3);t.exports=r},function(t,e,n){"use strict";function r(t){return o(this.__data__,t)>-1}var o=n(3);t.exports=r},function(t,e,n){"use strict";function r(t,e){var n=this.__data__,r=o(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var o=n(3);t.exports=r},function(t,e,n){"use strict";function r(){this.size=0,this.__data__={hash:new o,map:new(s||i),string:new o}}var o=n(31),i=n(2),s=n(8);t.exports=r},function(t,e,n){"use strict";function r(t){var e=o(this,t).delete(t);return this.size-=e?1:0,e}var o=n(5);t.exports=r},function(t,e,n){"use strict";function r(t){return o(this,t).get(t)}var o=n(5);t.exports=r},function(t,e,n){"use strict";function r(t){return o(this,t).has(t)}var o=n(5);t.exports=r},function(t,e,n){"use strict";function r(t,e){var n=o(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var o=n(5);t.exports=r},function(t,e,n){"use strict";function r(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}t.exports=r},function(t,e,n){"use strict";var r=n(95),o=r(Object.keys,Object);t.exports=o},function(t,e,n){"use strict";(function(t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(16),i="object"==r(e)&&e&&!e.nodeType&&e,s=i&&"object"==r(t)&&t&&!t.nodeType&&t,u=s&&s.exports===i,c=u&&o.process,a=function(){try{return c&&c.binding&&c.binding("util")}catch(t){}}();t.exports=a}).call(e,n(25)(t))},function(t,e,n){"use strict";function r(t){return i.call(t)}var o=Object.prototype,i=o.toString;t.exports=r},function(t,e,n){"use strict";function r(t,e){return function(n){return t(e(n))}}t.exports=r},function(t,e,n){"use strict";function r(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var r=arguments,s=-1,u=i(r.length-e,0),c=Array(u);++s<u;)c[s]=r[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=r[s];return a[e]=n(c),o(t,this,a)}}var o=n(37),i=Math.max;t.exports=r},function(t,e,n){"use strict";function r(t){return this.__data__.set(t,o),this}var o="__lodash_hash_undefined__";t.exports=r},function(t,e,n){"use strict";function r(t){return this.__data__.has(t)}t.exports=r},function(t,e,n){"use strict";function r(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}t.exports=r},function(t,e,n){"use strict";var r=n(57),o=n(101),i=o(r);t.exports=i},function(t,e,n){"use strict";function r(t){var e=0,n=0;return function(){var r=s(),u=i-(r-n);if(n=r,u>0){if(++e>=o)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var o=800,i=16,s=Date.now;t.exports=r},function(t,e,n){"use strict";function r(){this.__data__=new o,this.size=0}var o=n(2);t.exports=r},function(t,e,n){"use strict";function r(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}t.exports=r},function(t,e,n){"use strict";function r(t){return this.__data__.get(t)}t.exports=r},function(t,e,n){"use strict";function r(t){return this.__data__.has(t)}t.exports=r},function(t,e,n){"use strict";function r(t,e){var n=this.__data__;if(n instanceof o){var r=n.__data__;if(!i||r.length<u-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new s(r)}return n.set(t,e),this.size=n.size,this}var o=n(2),i=n(8),s=n(12),u=200;t.exports=r},function(t,e,n){"use strict";function r(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}t.exports=r},function(t,e,n){"use strict";function r(t){return function(){return t}}t.exports=r},function(t,e,n){"use strict";var r=n(47),o=n(7),i=Object.prototype,s=i.hasOwnProperty,u=i.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(t){return o(t)&&s.call(t,"callee")&&!u.call(t,"callee")};t.exports=c},function(t,e,n){"use strict";function r(t){return null!=t&&i(t.length)&&!o(t)}var o=n(21),i=n(22);t.exports=r},function(t,e,n){"use strict";function r(t,e){return t===e||o(t,e,i(e))}var o=n(50),i=n(66);t.exports=r},function(t,e,n){"use strict";var r=n(56),o=n(113),i=r(o);t.exports=i},function(t,e,n){"use strict";function r(t,e){return t&&t.length&&e&&e.length?o(t,e):t}var o=n(55);t.exports=r},function(t,e,n){"use strict";function r(){return[]}t.exports=r},function(t,e,n){"use strict";function r(){return!1}t.exports=r},function(t,e,n){"use strict";var r,o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(i,s){r=s,void 0!==(o="function"==typeof r?r.call(e,n,e,t):r)&&(t.exports=o)}(0,function(){function t(t){return("undefined"==typeof console?"undefined":i(console))!==c&&(void 0!==console[t]?e(console,t):void 0!==console.log?e(console,"log"):u)}function e(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function n(t,e,n){return function(){("undefined"==typeof console?"undefined":i(console))!==c&&(r.call(this,e,n),this[t].apply(this,arguments))}}function r(t,e){for(var n=0;n<a.length;n++){var r=a[n];this[r]=n<t?u:this.methodFactory(r,t,e)}}function o(e,r,o){return t(e)||n.apply(this,arguments)}function s(t,e,n){function s(t){var e=(a[t]||"silent").toUpperCase();try{return void(window.localStorage[p]=e)}catch(t){}try{window.document.cookie=encodeURIComponent(p)+"="+e+";"}catch(t){}}function u(){var t;try{t=window.localStorage[p]}catch(t){}if((void 0===t?"undefined":i(t))===c)try{var e=window.document.cookie,n=e.indexOf(encodeURIComponent(p)+"=");n&&(t=/^([^;]+)/.exec(e.slice(n))[1])}catch(t){}return void 0===l.levels[t]&&(t=void 0),t}var f,l=this,p="loglevel";t&&(p+=":"+t),l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=n||o,l.getLevel=function(){return f},l.setLevel=function(e,n){if("string"==typeof e&&void 0!==l.levels[e.toUpperCase()]&&(e=l.levels[e.toUpperCase()]),!("number"==typeof e&&e>=0&&e<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;if(f=e,n!==!1&&s(e),r.call(l,e,t),("undefined"==typeof console?"undefined":i(console))===c&&e<l.levels.SILENT)return"No console available for logging"},l.setDefaultLevel=function(t){u()||l.setLevel(t,!1)},l.enableAll=function(t){l.setLevel(l.levels.TRACE,t)},l.disableAll=function(t){l.setLevel(l.levels.SILENT,t)};var y=u();null==y&&(y=null==e?"WARN":e),l.setLevel(y,!1)}var u=function(){},c="undefined",a=["trace","debug","info","warn","error"],f=new s,l={};f.getLogger=function(t){if("string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=l[t];return e||(e=l[t]=new s(t,f.getLevel(),f.methodFactory)),e};var p=("undefined"==typeof window?"undefined":i(window))!==c?window.log:void 0;return f.noConflict=function(){return("undefined"==typeof window?"undefined":i(window))!==c&&window.log===f&&(window.log=p),f},f})},function(t,e,n){"use strict";var r=function(t){return t&&2===t.CLOSING},o=function(){return"undefined"!=typeof WebSocket&&r(WebSocket)},i=function(){return{constructor:o()?WebSocket:null,maxReconnectionDelay:1e4,minReconnectionDelay:1500,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,debug:!1}},s=function(t,e,n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){t[n]=e},enumerable:!0,configurable:!0})},u=function(t){return t.minReconnectionDelay+Math.random()*t.minReconnectionDelay},c=function(t,e){var n=e*t.reconnectionDelayGrowFactor;return n>t.maxReconnectionDelay?t.maxReconnectionDelay:n},a=["onopen","onclose","onmessage","onerror"],f=function(t,e,n){Object.keys(n).forEach(function(e){n[e].forEach(function(n){var r=n[0],o=n[1];t.addEventListener(e,r,o)})}),e&&a.forEach(function(n){t[n]=e[n]})},l=function t(e,n,o){var a=this;void 0===o&&(o={});var l,p,y=0,h=0,v=!0,d=null,b={};if(!(this instanceof t))throw new TypeError("Failed to construct 'ReconnectingWebSocket': Please use the 'new' operator");var _=i();if(Object.keys(_).filter(function(t){return o.hasOwnProperty(t)}).forEach(function(t){return _[t]=o[t]}),!r(_.constructor))throw new TypeError("Invalid WebSocket constructor. Set `options.constructor`");var m=_.debug?function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return console.log.apply(console,["RWS:"].concat(t))}:function(){},g=function(t,e){return setTimeout(function(){var n=new Error(e);n.code=t,Array.isArray(b.error)&&b.error.forEach(function(t){return(0,t[0])(n)}),l.onerror&&l.onerror(n)},0)},w=function(){if(m("close"),h++,m("retries count:",h),h>_.maxRetries)return void g("EHOSTDOWN","Too many failed connection attempts");y=y?c(_,y):u(_),m("reconnectDelay:",y),v&&setTimeout(x,y)},x=function(){m("connect");var t=l;l=new _.constructor(e,n),p=setTimeout(function(){m("timeout"),l.close(),g("ETIMEDOUT","Connection timeout")},_.connectionTimeout),m("bypass properties");for(var r in l)["addEventListener","removeEventListener","close","send"].indexOf(r)<0&&s(l,a,r);l.addEventListener("open",function(){clearTimeout(p),m("open"),y=u(_),m("reconnectDelay:",y),h=0}),l.addEventListener("close",w),f(l,t,b),l.onclose=l.onclose||d,d=null};m("init"),x(),this.close=function(t,e,n){void 0===t&&(t=1e3),void 0===e&&(e="");var r=void 0===n?{}:n,o=r.keepClosed,i=void 0!==o&&o,s=r.fastClose,u=void 0===s||s,c=r.delay,a=void 0===c?0:c;if(a&&(y=a),v=!i,l.close(t,e),u){var f={code:t,reason:e,wasClean:!0};w(),l.removeEventListener("close",w),Array.isArray(b.close)&&b.close.forEach(function(t){var e=t[0],n=t[1];e(f),l.removeEventListener("close",e,n)}),l.onclose&&(d=l.onclose,l.onclose(f),l.onclose=null)}},this.send=function(t){l.send(t)},this.addEventListener=function(t,e,n){Array.isArray(b[t])?b[t].some(function(t){return t[0]===e})||b[t].push([e,n]):b[t]=[[e,n]],l.addEventListener(t,e,n)},this.removeEventListener=function(t,e,n){Array.isArray(b[t])&&(b[t]=b[t].filter(function(t){return t[0]!==e})),l.removeEventListener(t,e,n)}};t.exports=l},function(t,e,n){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":o(window))&&(r=window)}t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(26);e.default={FifoDispatcher:r.FifoDispatcher,WebsocketTransport:r.WebsocketTransport,BaseSendQueue:r.BaseSendQueue,FifoQueue:r.FifoQueue,JSONSerializer:r.JSONSerializer,ChannelsApi:r.ChannelsApi,connect:function(t,e){var n=this.createClient(t,e);return n.initialize(),n},createClient:function(t,e){var n=new r.FifoDispatcher,o=new r.WebsocketTransport(t,e),i=new r.FifoQueue,s=new r.JSONSerializer;return new r.ChannelsApi(n,o,i,s)}}}])});